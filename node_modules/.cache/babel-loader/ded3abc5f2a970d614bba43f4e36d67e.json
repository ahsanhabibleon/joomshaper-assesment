{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/ahsan/Documents/Ahsan/projects/react-photo-gallery-with-photo-filter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from\"react\";import{useDispatch,useSelector}from'react-redux';import{changeFilter,_handleChangePhoto}from'../../../redux/actions/addNewPhotoToCanvasActions';import'./PhotoSettings.scss';function PhotoSettings(_ref){var imgIndex=_ref.imgIndex,imgSrc=_ref.imgSrc,isModalOpen=_ref.isModalOpen,getModalStatus=_ref.getModalStatus;var _useState=useState(isModalOpen),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState('changeImg'),_useState4=_slicedToArray(_useState3,2),activeTab=_useState4[0],setActiveTab=_useState4[1];var node=useRef();var dispatch=useDispatch();var canvasPhotos=useSelector(function(state){return state.canvasPhotos;});useEffect(function(){if(open){document.addEventListener(\"mousedown\",handleClickOutside);}else{document.removeEventListener(\"mousedown\",handleClickOutside);}return function(){document.removeEventListener(\"mousedown\",handleClickOutside);};},[open]);var handleChangePhoto=function handleChangePhoto(){dispatch(_handleChangePhoto(true,imgSrc));};var handleClickOutside=function handleClickOutside(e){if(node.current.contains(e.target)){return;}setOpen(false);getModalStatus(false);dispatch(_handleChangePhoto(false,imgSrc));};var handleActiveTab=function handleActiveTab(payload){setActiveTab(payload);};var changeSettings=function changeSettings(payload,filterType,imgIndex){dispatch(changeFilter(payload,filterType,imgIndex));};return/*#__PURE__*/_jsxs(\"div\",{className:\"photoSettings\",ref:node,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"photoSettings__tabNav\",children:[/*#__PURE__*/_jsx(\"button\",{className:'tabBtn'+(activeTab==='changeImg'?' is-active':''),onClick:function onClick(){return handleActiveTab('changeImg');},children:\"Image\"}),/*#__PURE__*/_jsx(\"button\",{className:'tabBtn'+(activeTab==='filter'?' is-active':''),onClick:function onClick(){return handleActiveTab('filter');},children:\"Filter\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"photoSettings__tabPanel\",children:[activeTab==='changeImg'&&/*#__PURE__*/_jsxs(\"div\",{className:\"photoSettings__tab__changeImg\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"photoSettings__imgThumb\",src:imgSrc,alt:\"...\"}),/*#__PURE__*/_jsx(\"button\",{className:\"changeImgBtn\",onClick:handleChangePhoto,children:\"Change Photo\"})]}),activeTab==='filter'&&/*#__PURE__*/_jsxs(\"div\",{className:\"photoSettings__tab__changeFilter\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"invert\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/invert.svg\",alt:\"\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"invert\",onChange:function onChange(e){return changeSettings(e.target.value,'invert',imgIndex);},value:canvasPhotos[imgIndex].filterSettings.invert,min:\"0\",max:\"100\",step:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filterVal\",children:[canvasPhotos[imgIndex].filterSettings.invert,\" %\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contrast\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/contrast.svg\",alt:\"\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"contrast\",onChange:function onChange(e){return changeSettings(e.target.value,'contrast',imgIndex);},value:canvasPhotos[imgIndex].filterSettings.contrast,min:\"0\",max:\"500\",step:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filterVal\",children:[canvasPhotos[imgIndex].filterSettings.contrast,\" %\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brightness\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/brightness.svg\",alt:\"\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"brightness\",onChange:function onChange(e){return changeSettings(e.target.value,'brightness',imgIndex);},value:canvasPhotos[imgIndex].filterSettings.brightness,min:\"0\",max:\"5\",step:\"0.01\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filterVal\",children:[Math.floor(canvasPhotos[imgIndex].filterSettings.brightness*100),\" %\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"grayscale\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/grayscale.svg\",alt:\"\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"grayscale\",onChange:function onChange(e){return changeSettings(e.target.value,'grayscale',imgIndex);},value:canvasPhotos[imgIndex].filterSettings.grayscale,min:\"0\",max:\"100\",step:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filterVal\",children:[canvasPhotos[imgIndex].filterSettings.grayscale,\" %\"]})]})]})]})]});}export default PhotoSettings;","map":{"version":3,"sources":["/Users/ahsan/Documents/Ahsan/projects/react-photo-gallery-with-photo-filter/src/components/Global/PhotoContainer/PhotoSettings.js"],"names":["React","useEffect","useState","useRef","useDispatch","useSelector","changeFilter","_handleChangePhoto","PhotoSettings","imgIndex","imgSrc","isModalOpen","getModalStatus","open","setOpen","activeTab","setActiveTab","node","dispatch","canvasPhotos","state","document","addEventListener","handleClickOutside","removeEventListener","handleChangePhoto","e","current","contains","target","handleActiveTab","payload","changeSettings","filterType","value","filterSettings","invert","contrast","brightness","Math","floor","grayscale"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux'\nimport { changeFilter, _handleChangePhoto } from '../../../redux/actions/addNewPhotoToCanvasActions'\nimport './PhotoSettings.scss'\n\nfunction PhotoSettings({ imgIndex, imgSrc, isModalOpen, getModalStatus }) {\n    const [open, setOpen] = useState(isModalOpen);\n    const [activeTab, setActiveTab] = useState('changeImg')\n    const node = useRef();\n    const dispatch = useDispatch();\n    const canvasPhotos = useSelector(state => state.canvasPhotos)\n\n    useEffect(() => {\n        if (open) {\n            document.addEventListener(\"mousedown\", handleClickOutside);\n        } else {\n            document.removeEventListener(\"mousedown\", handleClickOutside);\n        }\n\n        return () => {\n            document.removeEventListener(\"mousedown\", handleClickOutside);\n        };\n    }, [open]);\n\n    const handleChangePhoto = () => {\n        dispatch(_handleChangePhoto(true, imgSrc))\n    }\n    const handleClickOutside = e => {\n        if (node.current.contains(e.target)) {\n            return;\n        }\n        setOpen(false);\n        getModalStatus(false);\n        dispatch(_handleChangePhoto(false, imgSrc))\n    };\n    const handleActiveTab = (payload) => {\n        setActiveTab(payload)\n    }\n    const changeSettings = (payload, filterType, imgIndex) => {\n        dispatch(changeFilter(payload, filterType, imgIndex))\n    }\n\n    return (\n        <div className=\"photoSettings\" ref={node}>\n            <div className=\"photoSettings__tabNav\">\n                <button className={'tabBtn' + (activeTab === 'changeImg' ? ' is-active' : '')} onClick={() => handleActiveTab('changeImg')}>Image</button>\n                <button className={'tabBtn' + (activeTab === 'filter' ? ' is-active' : '')} onClick={() => handleActiveTab('filter')}>Filter</button>\n            </div>\n            <div className=\"photoSettings__tabPanel\">\n                {activeTab === 'changeImg' && (\n                    <div className=\"photoSettings__tab__changeImg\">\n                        <img className=\"photoSettings__imgThumb\" src={imgSrc} alt=\"...\" />\n                        <button className=\"changeImgBtn\" onClick={handleChangePhoto}>Change Photo</button>\n                    </div>\n                )}\n\n                {activeTab === 'filter' && (\n                    <div className=\"photoSettings__tab__changeFilter\">\n                        <div className=\"filter\">\n                            <label htmlFor=\"invert\"><img src=\"/img/invert.svg\" alt=\"\" /></label>\n                            <input type=\"range\" id=\"invert\" onChange={(e) => changeSettings(e.target.value, 'invert', imgIndex)} value={canvasPhotos[imgIndex].filterSettings.invert} min=\"0\" max=\"100\" step=\"1\" />\n                            <div className=\"filterVal\">\n                                {canvasPhotos[imgIndex].filterSettings.invert} %\n                            </div>\n                        </div>\n\n                        <div className=\"filter\">\n                            <label htmlFor=\"contrast\"><img src=\"/img/contrast.svg\" alt=\"\" /></label>\n                            <input type=\"range\" id=\"contrast\" onChange={(e) => changeSettings(e.target.value, 'contrast', imgIndex)} value={canvasPhotos[imgIndex].filterSettings.contrast} min=\"0\" max=\"500\" step=\"1\" />\n                            <div className=\"filterVal\">\n                                {canvasPhotos[imgIndex].filterSettings.contrast} %\n                            </div>\n                        </div>\n\n                        <div className=\"filter\">\n                            <label htmlFor=\"brightness\"><img src=\"/img/brightness.svg\" alt=\"\" /></label>\n                            <input type=\"range\" id=\"brightness\" onChange={(e) => changeSettings(e.target.value, 'brightness', imgIndex)} value={canvasPhotos[imgIndex].filterSettings.brightness} min=\"0\" max=\"5\" step=\"0.01\" />\n                            <div className=\"filterVal\">\n                                {Math.floor(canvasPhotos[imgIndex].filterSettings.brightness * 100)} %\n                            </div>\n                        </div>\n\n                        <div className=\"filter\">\n                            <label htmlFor=\"grayscale\"><img src=\"/img/grayscale.svg\" alt=\"\" /></label>\n                            <input type=\"range\" id=\"grayscale\" onChange={(e) => changeSettings(e.target.value, 'grayscale', imgIndex)} value={canvasPhotos[imgIndex].filterSettings.grayscale} min=\"0\" max=\"100\" step=\"1\" />\n                            <div className=\"filterVal\">\n                                {canvasPhotos[imgIndex].filterSettings.grayscale} %\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    )\n}\n\nexport default PhotoSettings\n"]},"metadata":{},"sourceType":"module"}